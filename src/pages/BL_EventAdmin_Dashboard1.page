<apex:page showHeader="false" controller="BL_EventAdmin_DashboardController" action="{!checkUserId}">
<c:AjaxLoader LoaderImage="{!$Resource.AjaxLoaderImage}"/>
<apex:stylesheet value="{!URLFOR($Resource.FormultiEvent,"css/screen.css")}"/> 
<apex:stylesheet value="{!URLFOR($Resource.FormultiEvent,"css/datePicker.css")}"/>

<style>

.round 
{
-webkit-font-smoothing: subpixel-antialiased;
font-size:16px;
-webkit-border-radius: 5px 5px 5px 5px;
-moz-border-radius: 5px 5px 5px 5px;
border-radius: 5px 5px 5px 5px;
margin:0px auto;
border:1px solid #CCC;
padding:8px;
background-color:#FFF;
width:940px;
-moz-box-shadow: 0 0 5px #888;
-webkit-box-shadow: 0 0 5px#888;
box-shadow: 0 0 5px #888;
border:1px solid #414141;
}

.h4green{color:#258d51; font-size:14px;}
.h4lightblue{color:#00a2b1; font-size:14px;}
.h4maroon{color:#ac1324; font-size:14px;}
.h4lightgreen{ color:#94af0a; font-size:14px;}

.chart-icon
{
background-image: url('{!URLFOR($Resource.DashboardIcons,'Icons/Chart.png')}');
}
.grid-icon
{
background-image: url('{!URLFOR($Resource.DashboardIcons,'Icons/Grid.png')}'); 
}

.geo-icon
{
background-image: url('{!URLFOR($Resource.DashboardIcons,'Icons/Geography.png')}'); 
padding-top:17px;
} 
.ind-icon
{
background-image: url('{!URLFOR($Resource.DashboardIcons,'Icons/Industry.png')}'); 
padding-top:17px;
} 
.scan-icon
{
background-image: url('{!URLFOR($Resource.DashboardIcons,'Icons/Scan.png')}'); 
padding-top:17px;
}
.dev-icon
{
background-image: url('{!URLFOR($Resource.DashboardIcons,'Icons/Device.png')}'); 
padding-top:17px;
}

</style>

<!-- topbar block start-->

<!-- Start: page-top-outer -->
<div id="page-top-outer">    

<!-- Start: page-top -->
<div id="page-top">

<!-- start logo -->
<div id="logo">
   
      
</div>
<!-- end logo -->

<!--  start top-search -->

<div id="top-search">
<table border="0" cellpadding="0" cellspacing="0">
<tr>
<td class="welcome">
 <font>Welcome :</font>
 <b><font size="2" color="Sky Blue" class="username">{!$User.Firstname}&nbsp;{!$User.Lastname}</font></b>  
</td> 
</tr>
</table>
</div>

<!--  end top-search -->
<div class="clear"></div>

</div>
<!-- End: page-top -->

</div>
<!-- End: page-top-outer -->
    
<div class="clear">&nbsp;</div>
 
<!--  start nav-outer-repeat............................................... START -->
<div class="nav-outer-repeat"> 
<!--  start nav-outer -->
<div class="nav-outer"> 

<!-- Start Nav Right-->
        <div id="nav-right">
        
               
<!----LOGOUT ACTION START -->
<div class="nav">
<div class="table">
    
<apex:form >

<div class="nav-divider">&nbsp;</div>        
<!--<apex:outputLink value="/apex/BL_Eventadmin_Profile"  style="text-style:bold; color:#FFFFFF; padding:10px 15px 0 0;">Profile</apex:outputLink>-->
 <apex:outputLink value="/apex/BL_Eventadmin_Profile" style="text-style:bold; color:#FFFFFF; padding:10px 15px 0 0;"><b>Profile</b></apex:outputLink> 
<div class="nav-divider">&nbsp;</div>
<apex:commandLink action="{!$Site.Prefix}/secur/logout.jsp" rendered="{!NOT(ISPICKVAL($User.UserType,'Guest'))}" style="text-style:bold; color:#FFFFFF; padding:10px 15px 0 0;">{!$Label.site.logout}</apex:commandLink>

</apex:form>

</div></div>
       
<!----LOGOUT ACTION END--->
           
           
<div class="clear">&nbsp;</div>
        
</div>
<!-- end nav-right -->



        <!--  start nav -->
        <div class="nav">
        <div class="table">
   
         <!--<div class="nav-divider">&nbsp;</div>-->
  <div class="nav-divider">&nbsp;</div> 
  <ul class="current"><li>
  <apex:outputLink value="/apex/BL_EventAdmin_Dashboard"><b>Dashboard</b></apex:outputLink>
  </li></ul>
  
  <div class="nav-divider">&nbsp;</div>                    
    <ul class="select"><li>
    <apex:outputLink value="/apex/BL_EventAdmin_Events"><b>Events</b></apex:outputLink>
    </li></ul>       
        
  <div class="nav-divider">&nbsp;</div>
   <ul class="select"><li>
   <apex:outputLink value="/apex/BL_Eventadmin_samplebooth"><b>Booths</b></apex:outputLink>
   </li></ul>
   
  <div class="nav-divider">&nbsp;</div>
   <ul class="select"><li>
   <apex:outputLink value="/apex/Qrcode_Eventadmin_Attendees" ><b>Attendees</b></apex:outputLink>
   </li></ul>
   
  <div class="nav-divider">&nbsp;</div>
   <ul class="select"><li>
   <apex:outputLink value="/apex/BL_Evntadmreports"><b>Reports</b></apex:outputLink>        
   </li></ul>
        
        

        
        
        
        
        <div class="clear"></div>
        </div>
        <div class="clear"></div>
        </div>
        <!--  start nav -->
        

        

</div>
<div class="clear"></div>
<!--  start nav-outer -->
</div>


<!--MENU END-->

<!--content start-->

<div style="clear:both; margin: 0 0 3px 0;">&nbsp;</div>

<div class="round">
<table width="100%" border="0" align="center" cellpadding="0" cellspacing="0">
<tr>
<td height="30px"  align="left" valign="middle" bgcolor="#545454" style="padding-left:10px; color:#FFFFFF;
background:#414141;background: -webkit-gradient(linear, left top, left bottom, from(#545454), to(#292929));
background: -moz-linear-gradient(top, #545454, #292929);
background-image: -o-linear-gradient(top, #545454, #292929);
background-image: -ms-linear-gradient(top, #545454, #292929);
filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#545454', endColorstr='#292929');">
<h4>Overview</h4>
</td>   
</tr>

<tr>
<td colspan="2" align="center" valign="top" style="padding-top:5px;"><table width="100%" border="0" cellspacing="0px" cellpadding="0">
<tr>
<td width="33%" align="center" valign="top" style="border-right:1px solid #414141;"><table width="98%" border="0" align="left" cellpadding="0" cellspacing="0">
  <tr>
    <td height="28" align="left" valign="middle" class="h4lightblue"><h4>Events</h4></td>
    <td height="28" align="left" valign="middle" class="h4lightblue"><h4><span><apex:outputText value="{!currentevent}"/></span></h4></td>
  </tr>
  <tr>
    <td width="80%" height="28" align="left" valign="middle" class="h4lightgreen"><h4>Total No. of Attendees</h4></td>
    <td width="20%" height="28" align="left" valign="middle" class="h4lightgreen"><h4><span><apex:outputText value="{!TotalAttendees}"/></span></h4></td>
  </tr>
  <tr>
    <td height="28" align="left" valign="middle" class="h4maroon"><h4>Total No. of Visited Attendees </h4></td>
    <td height="28" align="left" valign="middle" class="h4maroon"><h4><span><apex:outputText value="{!TotalVisitedAttendees}"/></span></h4></td>
  </tr>

          
</table></td>
<td width="33%" align="center" valign="top" ><table width="98%" border="0" align="center" cellpadding="0" cellspacing="0">
  <tr>
    <td width="81%" height="28" align="left" valign="middle" class="h4lightblue"><h4>Total No. of Active Booths</h4></td>
    <td width="19%" height="28" align="left" valign="middle" class="h4lightblue"><h4><span><apex:outputText value="{!boothcount}"/></span></h4></td>
  </tr>
  <tr>
    <td height="28" align="left" valign="middle" class="h4lightgreen"><h4>Total No. of Mobile Users</h4></td>
    <td height="28" align="left" valign="middle" class="h4lightgreen"><h4><span><apex:outputText value="{!TotalMobileUsers}"/></span></h4></td>
  </tr>
<!-- <tr>
    <td height="28" align="left" valign="middle" class="h4maroon"><h4>Total Scans</h4></td>
    <td height="28" align="left" valign="middle" class="h4maroon"><h4><span><apex:outputText value="{!TotalScansNum}"/></span></h4></td>
  </tr> -->
  </table></td>
</tr>
</table>
   </td>
  </tr>
</table>
</div>

<br />

<apex:form id="reports" >
<div class="round">
<table width="100%" border="0" align="center" cellpadding="0" cellspacing="0" class="table"> 
<tr>
<td width="715" align="left" valign="top"><table width="100%" border="0" align="left" cellpadding="0" cellspacing="0">
<tr>
<td height="30px" style="padding-left:10px; color:#FFFFFF; padding-top: 5px;
background:#414141; background:#414141;background: -webkit-gradient(linear, left top, left bottom, from(#545454), to(#292929));
background: -moz-linear-gradient(top, #545454, #292929);
background-image: -o-linear-gradient(top, #545454, #292929);
background-image: -ms-linear-gradient(top, #545454, #292929);
filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#545454', endColorstr='#292929');">
<h4>Dashboard</h4>
<div style="float:right; width: 50% ; text-align: right; padding-bottom: 3px; font-size:14px; padding-right: 10px;">
<h5><apex:outputLabel value="Select Event : " style="color:#FFFFFF;"></apex:outputLabel></h5>
  <apex:selectList value="{!EventString}" size="1">
  <apex:selectOptions value="{!Events}" />      
  <apex:actionSupport action="{!EventDetailDashBoard}" event="onchange" reRender="reports"/> 
</apex:SelectList> 
</div>
</td>
</tr>
</table><br />
<table width="100%" border="0" align="center" cellpadding="0" cellspacing="0">
<tr>
<td align="center" valign="top" bgcolor="#FFFFFF" id="db" style="padding-left:10px;">


<script type="text/javascript" charset="utf-8" src="http://cdn.sencha.io/ext-4.0.7-gpl/ext-all.js"></script>
<link rel="stylesheet" type="text/css" href="http://cdn.sencha.io/ext-4.0.7-gpl/resources/css/ext-all.css"/> 
<!-- <link rel="Stylesheet" type="text/css" href="{!$Resource.extjs4_5}/extjs4_5/resources/css/ext-all.css"/>
<script type="text/javascript" src="{!$Resource.extjs4_1}/extjs4_1/ext-all.js"></script> -->

<script type="text/javascript">  

Ext.onReady(function ()
{

var geographytitle='Report by Geography';
var industrytitle='Report by Industry';
var iostitle='Device Usage (Apple vs Android)';
var scantitle='Hourly Scans (Event/Attendee Activity)';


var myDirectfn = function(opts, fn, proxy) {
    var start = opts.start,
        end = opts.limit+opts.start,
        data = [];
    if (end > myData1.length) end = myData1.length;
    for (var i = start; i < end; i++)
        data.push(myData1[i]);
    data.total = myData1.length;
    fn(data, {
        status: true,
        result: data
    });
};

myDirectfn.directCfg = {
    method: {len:1}
};

var myDirectfn1 = function(opts, fn, proxy) {
    var start = opts.start,
        end = opts.limit+opts.start,
        data = [];
    if (end > myData2.length) end = myData2.length;
    for (var i = start; i < end; i++)
        data.push(myData2[i]);
    data.total = myData2.length;
    fn(data, {
        status: true,
        result: data
    });
};

myDirectfn1.directCfg = {
    method: {len:1}
};

// Geography report store
      
var myData1=new Array();

<apex:repeat value="{!indusreport}" var="row">   

var rowArray=new Array();
rowArray[0]=  '{!row.id}';
var RName ="{!row.AS_id__r.AS_FirstName__c}";
rowArray[1]=  RName.replace(/\'/g,'\'');   
var NName ="{!row.AS_id__r.AS_LastName__c}";
rowArray[2]=  NName.replace(/\'/g,'\'');
var lName ="{!row.AS_id__r.AS_Company__c}"; 
rowArray[3]=  lName.replace(/\'/g,'\''); 
var sName ="{!row.AS_id__r.AS_Work_States__c}"; 
rowArray[4]=  sName.replace(/\'/g,'\''); 
rowArray[5]=  '{!row.AS_id__r.AS_CellPhone__c}';
var eName ="{!row.AS_id__r.AS_Email__c}"; 
rowArray[6]=  eName.replace(/\'/g,'\''); 
myData1.push(rowArray);          

</apex:repeat>

if(myData1.length<=0)
{
 geographytitle=geographytitle+' <span style=\'padding-left:160px\'><font color=\'red\'>No Records Found</font></span>';        
 tSize=0;        
};


var storegrid = new Ext.data.SimpleStore(
{
fields:[{name:'id'},{name:'FirstName'},{name:'LastName'},{name:'AS_id__r.AS_Company__c'},{name:'AS_id__r.AS_Work_States__c'},{name:'AS_id__r.AS_CellPhone__c'},{name:'AS_id__r.AS_Email__c'}],
pageSize: 10,
proxy: {
type: 'direct',
directFn: myDirectfn,
reader: {
type: 'array'
}
},
});
storegrid.loadData(myData1);

   
// Industry grid store

var myData2=new Array();
    
<apex:repeat value="{!indusgridreport}" var="row">   

  var rowArray=new Array(); 
  rowArray[0]=  '{!row.id}';  
  var yName ="{!row.AS_id__r.AS_FirstName__c}";
  rowArray[1]=  yName.replace(/\'/g,'\'');  
  var zName ="{!row.AS_id__r.AS_LastName__c}";
  rowArray[2]=  zName.replace(/\'/g,'\'');
  var iName ="{!row.AS_id__r.AS_PrimaryBusinessCategory1__c}"; 
  rowArray[3]=  iName.replace(/\'/g,'\'');   
  rowArray[4]=  '{!row.AS_id__r.AS_CellPhone__c}';  
  var oName ="{!row.AS_id__r.AS_Email__c}"; 
  rowArray[5]=  oName.replace(/\'/g,'\'');   
  myData2.push(rowArray);          
 
</apex:repeat>   

if(myData2.length<=0)
{
 industrytitle=industrytitle+' <span style=\'padding-left:175px\'><font color=\'red\'>No Records Found</font></span>';        
 tSize=0;       
};
 
var storeindusgrid = new Ext.data.SimpleStore( 
{
fields: [{name:'id'},{name:'FirstName'},{name:'LastName'},{name:'AS_id__r.AS_PrimaryBusinessCategory1__c'},{name:'AS_id__r.AS_CellPhone__c'},{name:'AS_id__r.AS_Email__c'}],
pageSize: 10,
proxy: {
type: 'direct',
directFn: myDirectfn1,
reader: {
type: 'array'
}
},
});
storeindusgrid.loadData(myData2);
     
 
// geography chart store 

var store = Ext.create('Ext.data.JsonStore', {  
    fields: ['namegeo', 'datageo'],   
    data: [
    <apex:repeat value="{!grphy}" var="a"> 
    {
    'namegeo' : '{!a.geogy}',  
    'datageo' :{!a.georecords}
    }, 
    </apex:repeat>  
 ]
});  
  
  
// Industry chart store
 
var store1 = Ext.create('Ext.data.JsonStore', { 
fields: ['nameindus', 'dataI'],
data: [
<apex:repeat value="{!indus}" var="a">
{
'nameindus' : '{!a.industry}',  
'dataI' :{!a.indusrec}
},
</apex:repeat>
]
});
  
 
// device usage store 
  
var iosstore = Ext.create('Ext.data.JsonStore', {
   fields: ['nameios', 'dataios'],
   data: [
   <apex:repeat value="{!iosdevice}" var="u"> 
   {
    'nameios' : '{!u.iosname}',  
    'dataios' :{!u.iosrecords}
   },
   </apex:repeat>  
 ]
});




// Hourly scans store

var scanstore = Ext.create('Ext.data.JsonStore',
   {
   fields: ['Total Scans','scannedtime','Event Date'], 
   data: [
   <apex:repeat value="{!hourlyscans}" var="u"> 
   {
    'Total Scans' : {!u.scanrecords},
    'scannedtime' : '{!u.sTime}',
    'Event Date' : '{!u.eventdatescan}'
   },
   </apex:repeat>
 ]
});

var daystore = Ext.create('Ext.data.Store', {
    fields: ['name'],
    data : [
       {"name":"November 16,2012"},
       {"name":"November 17,2012"},
       {"name":"November 18,2012"},
       {"name":"November 19,2012"},
       {"name":"November 20,2012"}  
    ]
});

var datestore=new Ext.data.Store({
 fields: ['name'],
 data : [                                         
   
  ]
});


 
// Reports Panel Start
 
 
Ext.create('Ext.Panel', { 
width:900,
height: 690,
iconCls: 'report-icon',
title: 'Reports Dashboard',
id:'parentpanel',       
renderTo: 'db',
border: 0,
title: false,
header: false,
headerCfg: false,          
layout: 
{
type: 'table', 
columns: 3,
tableAttrs: 
{
style: 
{ 
width: '100%', 
height: '100%' 
}
}
},
defaults: 
{
bodyStyle: 'padding:4px' 
},
items: [
{
title: '',
border:false,
columnWidth:0.050,
rowspan:2
},
  
  
  
 // 1 panel start
  
{
xtype: 'panel',    
title: geographytitle,  
id:'geopanel', 
width: 432,
height: 330,
iconCls : 'geo-icon',
closeAction: 'hide',
renderTo: Ext.getBody(), 
layout: 'card', 
tbar: [
{ 
xtype: 'tbspacer', 
width: 365
},
{
xtype : 'button', 
id:'chartid',
iconCls : 'chart-icon', 
layout:'autofit',
handler: function(btn) 
{
var panel = Ext.getCmp ('geopanel');
panel.getLayout().setActiveItem ('chartCmp');
}
},
{
xtype:'tbseparator' 
},
{
xtype : 'button', 
text : null, 
id:'gridid', 
iconCls : 'grid-icon', 
layout: 'autofit', 
handler: function(btn) 
{
var panel = Ext.getCmp ('geopanel');
panel.getLayout().setActiveItem ('gridpanel');
}
}
],
items: 
[{
xtype: 'chart', 
id: 'chartCmp',
animate: false,
store: store,
layout: 'fit',
shadow: true, 
legend: 
{
position: 'right',
labelFont: '10px Helvetica, sans-serif'
},
insetPadding: 30, 
theme: 'Base:gradients',
series: [{
type: 'pie',  
field: 'datageo',   
showInLegend: true,  
tips: {
trackMouse: true,    
width: '100%',  
height: 25,  
renderer: function(storeItem, item) 
{
var total = 0;
store.each(function(rec) 
{  
total += rec.get('datageo');       
}); 
this.setTitle(storeItem.get('namegeo') + ' : ' + storeItem.get('datageo') +  ' Attendees');       
}
},
highlight: {  
segment: { 
margin: 10  
} 
}, 
label: { 
field: 'namegeo', 
contrast: true,
display:'rotate',
font: '12px Helvetica, sans-serif'
}
}],
},
{
xtype:'grid',    
layout:'fit',   
renderTo: Ext.getBody(),  
id:'gridpanel',  
store: storegrid,
title: false,
header: false, 
bbar: new Ext.PagingToolbar({
store: storegrid,
pageSize: 10,
displayInfo: true
}),
listeners:
{
afterrender: function (component)
{
component.down('#refresh').hide();
}
},
columns: [
{header:'id', dataIndex: 'id',hidden:true }, 
{header: 'Name', dataIndex: 'Name',
 renderer: function(value,p,r)           
 {
  return r.data['FirstName']+ ' ' + r.data['LastName'];
 }
}, 
{ header: 'Phone',  dataIndex: 'AS_id__r.AS_CellPhone__c' }, 
{ header: 'E-Mail', dataIndex: 'AS_id__r.AS_Email__c',flex:1.5},    
{ header: 'State', dataIndex: 'AS_id__r.AS_Work_States__c',flex:1}
]
}]
} ,


// 1 panel end
 
 
 
// 2 panel start
   
   
{
xtype: 'panel',
title: industrytitle,
id:'panel1',   
width: 432,
height: 330,
iconCls: 'ind-icon',
renderTo: Ext.getBody(),
layout: 'card',
activeItem: 'chartcmp1',
tbar: [
{ 
xtype: 'tbspacer', 
width: 365
},
{
xtype : 'button',  
text : null,
iconCls : 'chart-icon', 
id:'induschartid',
layout: 'autofit',
handler: function(btn) 
{
var panel = Ext.getCmp ('panel1');
panel.getLayout().setActiveItem ('chartcmp1');
}
},
{
xtype:'tbseparator'
},
{
xtype : 'button',
text : null,
id:'indusgridid',
iconCls : 'grid-icon',
layout: 'autofit',
handler: function(btn) 
{
var panel = Ext.getCmp ('panel1');
panel.getLayout().setActiveItem ('gridpanel1');
}
}],
items: [{
xtype: 'chart',
id:'chartcmp1',
animate: true,
store: store1,
axes: [
{
type: 'Numeric',
position: 'left',
fields: ['dataI'],
grid: true,
grid: {
odd: {
opacity: 0.5,
fill: '#ddd',
stroke: '#bbb',
'stroke-width': 1
}
},
dashSize: 1,
majorTickSteps :5,
minimum: 0,
decimals: 0,
maximum : <apex:outputText value="{!maxValueIndustry}"></apex:outputText>
}, 
{
type: 'Category',
position: 'bottom',
fields: ['nameindus'],
dashSize: 0
}],
series: [
{
type: 'column',
axis: 'left',
groupGutter : 25,
xField: 'nameindus',
yField: ['dataI'],
tips: {
mouseOffset:[-175,-50],
width: '100%',
height: 25,
renderer: function(storeItem, item) 
{
this.setTitle(storeItem.get('nameindus') + ' : ' + storeItem.get('dataI') + ' Attendees ');   
}      
},   
label: { 
field: 'nameindus',
font: '12px Arial'
}
}]  
},   
{  
xtype:'grid',    
layout:'fit',   
renderTo: Ext.getBody(),  
id:'gridpanel1',  
store: storeindusgrid,
title: false,
header: false,  
bbar: new Ext.PagingToolbar({
store: storeindusgrid,
pageSize: 10,
displayInfo: true
}),
listeners:
{
afterrender: function (component)
{
component.down('#refresh').hide();
}
},
columns:[
{ header:'id', dataIndex: 'id',hidden:true },   
{ header: 'Name',  dataIndex: 'Name',
renderer: function(value, p, r)           
{
 return r.data['FirstName']+ ' ' + r.data['LastName'];
}
},     
{ header: 'Phone', dataIndex: 'AS_id__r.AS_CellPhone__c'}, 
{ header: 'E-Mail', dataIndex: 'AS_id__r.AS_Email__c',flex:1},
{ header: 'Industry', dataIndex: 'AS_id__r.AS_PrimaryBusinessCategory1__c'}
]
}]
},


// 2 panel end
 
 
 
 
 
// 3 panel start 
   
    
{
xtype: 'panel',  
title: scantitle,
id:'scanchart',
width: 432,
height: 330,
iconCls: 'scan-icon',
layout: 'fit',
renderTo: Ext.getBody(),
tbar: [
{
xtype: 'tbspacer', 
width: 230
},
{
xtype: 'label',
contentEl:'eventdate',
style: {
color:'#153E7E'
}
},

],
items:[ 
{
xtype: 'chart',
store: scanstore,
theme: 'Sky',
axes: [
{
title: 'No. of Scans',
type: 'Numeric',
position: 'left',
fields: ['Total Scans'],
grid: {
odd: {
opacity: 0.5,
fill: '#ddd',
stroke: '#bbb',
'stroke-width': 1
}    
},
dashSize: 1,
majorTickSteps :5,
decimals: 0,
maximum : <apex:outputText value="{!maxValueHourly}"></apex:outputText>
},
{
title: 'Scanned Time',
type: 'Category', 
position: 'bottom', 
fields: ['scannedtime'],
dashSize: 0
}],
series: [
{
type: 'line',
xField: ['scannedtime'],
yField: ['Total Scans'],
fill: true,
markerConfig:{
type: 'circle',
size: 3,
radius: 3,
'stroke-width': 0
},
tips: 
{
 trackMouse: true,
 width: 65,
 height: 25,
 renderer: function(storeItem, item) 
 {
  this.setTitle(storeItem.get('Total Scans') + ' Scans ');
 }      
 } 
}]
}]
},


// 3 panel end
  
  
  
  
  
  
// 4 panel start
       
{
xtype: 'panel',
title: iostitle,
id:'devicechart',   
width: 432,
height: 330,
iconCls: 'dev-icon',
renderTo: Ext.getBody(),
layout: 'card',
items: [
{
xtype: 'chart',
id:'devchart',
layout:'fit',
animate: true,
store: iosstore,
shadow: true,
theme: 'Base',
series: [{
type: 'pie',
angleField: 'dataios',
tips: 
{
trackMouse: true,
width: 130,
height: 30,
renderer: function(storeItem, item) 
{
var total = 0;
iosstore.each(function(rec) 
{
total += rec.get('dataios');
});
 this.setTitle(storeItem.get('nameios') + ' : ' + storeItem.get('dataios') +  ' Users');   
}
},
highlight: 
{
 segment: 
 {
  margin: 20
 }
},
label: 
{
field: 'nameios',
display: 'rotate',
contrast: true,
font: '18px Arial'
}
}]
}]
}
 
 // 4 panel end
] 
});
 storegrid.loadPage(1);
 storeindusgrid.loadPage(1);
 Ext.each(
Ext.getCmp('chartCmp').legend.items, function(item) {
item.un("mousedown", item.events.mousedown.listeners[0].fn);
})
});


</script>

</td>

</tr>
</table>

<div id="eventdate">
<apex:outputLabel value="Choose Event Date :"></apex:outputLabel>
 <apex:selectList value="{!EventDates}"  size="1" >
   <apex:selectOptions value="{!EventDate}" />
   <apex:actionSupport action="{!pickdate}" event="onchange" rerender="reports"/>
 </apex:selectList>
</div>
</td>

</tr>
</table>

</div>


<!--content end-->
<!-- start footer -->         
<div id="footer">
    <!--  start footer-left -->
    <div id="footer-left">&copy; Copyright Globalnest LLC. <span id="spanYear"></span> 
    <a href="">www.globalnest.com</a> . All rights reserved.</div>
    <!--  end footer-left -->
    <div class="clear">&nbsp;</div>
</div>
<!-- end footer -->


</apex:form>
</apex:page>