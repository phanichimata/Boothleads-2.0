<apex:page controller="Boothadmreportscntrl" showHeader="false" standardStylesheets="false">

 <apex:stylesheet value="{!URLFOR($Resource.QRCode_CSS,"css/screen.css")}"/> 

<style>
x-grid3-hd-inner x-grid3-hd-GlobalNestEM__Event_Title__c {

background-color: #FFFFFF;

}
</style>


<!-- Start: page-top-outer -->

<div id="page-top-outer">    

<!-- Start: page-top -->   

<div id="page-top">  

    <!-- start logo -->  
    <div id="logo">  
   
      
    </div>
    <!-- end logo -->  
    
    <!--  start top-search -->  
    <div id="top-search">
        <table border="0" cellpadding="0" cellspacing="0">  
        <tr> 
        <td class="welcome">  
        
       
        
        <font>Welcome  :</font> 
                   <b><font size="2" color="Sky Blue">{!$User.Firstname}&nbsp;{!$User.Lastname}     </font></b>  
        
       </td>
        
        
        
        </tr>
        </table>
    </div>
    <!--  end top-search -->
    <div class="clear"></div>

</div>
<!-- End: page-top -->

</div>
<!-- End: page-top-outer -->
    
<div class="clear">&nbsp;</div>
 
<!--  start nav-outer-repeat................................................................................................. START -->
<div class="nav-outer-repeat"> 
<!--  start nav-outer -->
<div class="nav-outer"> 

<!-- Start Nav Right-->
        <div id="nav-right">
        
               
           <!----LOGOUT ACTION -->
           <div class="nav">
        <div class="table">
        
       <apex:form >
        
       
        <div class="nav-divider">&nbsp;</div>
        
       <apex:commandLink action="{!profileaction}"  style="text-style:bold; color:#FFFFFF; padding:10px 15px 0 0;">Profile</apex:commandLink>
      
       <div class="nav-divider">&nbsp;</div>
        <apex:commandLink action="{!$Site.Prefix}/secur/logout.jsp" rendered="{!NOT(ISPICKVAL($User.UserType,'Guest'))}" style="text-style:bold; color:#FFFFFF; padding:10px 15px 0 0;">{!$Label.site.logout}</apex:commandLink>
        </apex:form>

            </div></div>
           
           <!----LOGOUT ACTION END--->
           
           
            <div class="clear">&nbsp;</div>
        
            <!--  start account-content --> 
            <div class="account-content">
            <div class="account-drop-inner">
                <a href="" id="acc-settings">Settings</a>
                <div class="clear">&nbsp;</div>
                <div class="acc-line">&nbsp;</div>
                <a href="" id="acc-details">Personal details </a>
                <div class="clear">&nbsp;</div>
                <div class="acc-line">&nbsp;</div>
                <a href="" id="acc-project">Project details</a>
                <div class="clear">&nbsp;</div>
                <div class="acc-line">&nbsp;</div>
                <a href="" id="acc-inbox">Inbox</a>
                <div class="clear">&nbsp;</div>
                <div class="acc-line">&nbsp;</div>
                <a href="" id="acc-stats">Statistics</a> 
            </div>
            </div>
            <!--  end account-content -->
        
        </div>
        <!-- end nav-right -->


        <!--  start nav -->
        <div class="nav">
        <div class="table">
        
       
        
        <div class="nav-divider">&nbsp;</div>
                            
        <ul class="select"><li>
        <apex:form >
        <apex:commandLink action="{!EventAction}"><b>Events</b></apex:commandLink>
        </apex:form>
      
        </li>
        </ul>
        
        
        
        <div class="nav-divider">&nbsp;</div>
        
        <ul class="select"><li>
        <apex:form >
        <apex:commandlink action="{!Customeraction}"><b>Booth Admin</b></apex:commandlink>
        </apex:form>
       
        </li>
        </ul>
        <div class="nav-divider">&nbsp;</div>
        
        <ul class="select"><li>
        <apex:form >
        <apex:commandLink action="{!AttendeesAction}" ><b>Leads </b> </apex:commandLink>
        </apex:form>
       
        </li>
        </ul>
        
        
        
        <div class="nav-divider">&nbsp;</div>
        
        <ul class="current"><li><apex:form ><apex:commandlink action="{!Reportsaction}"><b>Reports</b></apex:commandlink></apex:form>
        
        </li>
        </ul>
        
      
        
        
        <div class="clear"></div>
        </div>
        <div class="clear"></div>
        </div>
        <!--  start nav -->
        

</div>
<div class="clear"></div>
<!--  start nav-outer -->
</div>
<!--  start nav-outer-repeat................................................... END -->

 <div class="clear"></div>

                  <!--<apex:outputLabel > <font size="4" color="red">*</font><font size="2" color="Black">Events</font></apex:outputLabel>
        
                         <apex:selectList size="1" style="width:180px" multiselect="false" value="{!sel}">
                            <apex:selectOptions value="{!Allevents}"/>
                               </apex:selectList>
                       
      <apex:commandButton value="GO" action="{!go}"/> -->
               
<!-- start content-outer ........................................................................................................................START -->
<div id="content-outer">
<!-- start content -->
<div id="content">

    <!--  start page-heading -->
    
    <div id="page-heading">
    <apex:form >
    <h1><b>Events</b></h1>  
      <apex:selectList value="{!eventSelected}" multiselect="false" size="1">
       <apex:selectOptions value="{!items}"/>
      <apex:actionSupport action="{!getEvents}" event="onchange"/> 
      </apex:selectList> </apex:form> 
        
                                  
        
    </div>
    <table border="0" width="100%" cellpadding="0" cellspacing="0" id="content-table">
    <tr>
        <th rowspan="3" class="sized">
        
        <img src="{!URLFOR($Resource.QRCode_CSS,"css/images/shared/side_shadowleft.jpg")}" width="20" height="300" alt="" /></th>
        <th class="topleft"></th>
        <td align="right" valign="middle" id="tbl-border-top">&nbsp;</td>
        <th class="topright"></th>
        <th rowspan="3" class="sized">
        <img src="{!URLFOR($Resource.QRCode_CSS,"css/images/shared/side_shadowright.jpg")}" width="20" height="300" alt="" /></th>
    </tr>
    <tr>
        <td id="tbl-border-left"></td>
        <td>
        <!--  start content-table-inner ...................................................................... START -->
        <div id="content-table-inner">
        
            <!--  start table-content  -->
            <div id="table-content">
      
<style>
    .reply-text {
                    /*margin:15px  !important;
                     white-space:pre-wrap !important;
                      display:inline-block;
                      */
               }
</style>
    
    <!-- Reports Code Start -->
    
         <!-- Choose Reports Start -->


                                                     <p align="right">   </p><br/>
  <apex:outputPanel rendered="{!PageReportBool}">
  <apex:form >  
 
 <script>
            var hdneventName;
 </script>
 
    <link rel="Stylesheet" type="text/css" href="{!$Resource.extjs}/ext-3.1.1/resources/css/ext-all.css"/>
    
    <link rel="Stylesheet" type="text/css" href="{!$Resource.extjs}/ext-3.1.1/examples/ux/css/LockingGridView.css"/>
    
    <script type="text/javascript" src="{!$Resource.extjs}/ext-3.1.1/adapter/ext/ext-base.js"></script>
    
    <script type="text/javascript" src="{!$Resource.extjs}/ext-3.1.1/ext-all.js"></script>
    
    <script type="text/javascript" src="{!$Resource.extjs}/ext-3.1.1/examples/ux/PagingMemoryProxy.js"></script>
    
    <script type="text/javascript" src="{!$Resource.extjs}/ext-3.1.1/examples/ux/ProgressBarPager.js"></script>
    
    <script type="text/javascript" src="{!$Resource.extjs}/ext-3.1.1/examples/ux/LockingGridView.js"></script>
    
    
  <script type="text/javascript"> 
  
         var GridTitle='Reports'; 
         Ext.onReady(function(){
         var mydata;
         var selectedChkbox;
         var finalSter='';              
         var fm = Ext.form;
         var myData1=new Array();
         var myDataString1 = 'var myData = [ ';      
      <apex:repeat value="{!evntReports}" var="row">   
      
          var rowArray=new Array();
          rowArray[0]=  '{!row.id}';
          var RName ="{!row.RE_Name__c}";
          rowArray[1]=  RName.replace(/\'/g,'\'');   
          var lName ="{!row.RE_Description__c}";
          rowArray[2]=  lName.replace(/\'/g,'\'');
          rowArray[3]=  '{!row.CreatedDate}';
          myData1.push(rowArray);          
         
     </apex:repeat>   
        
      if(myData1.length<=0)
      {
        GridTitle=GridTitle+' - <span style=\'padding-left:200px\'><font color=\'red\'>No Records Found</font></span>';
        tSize=0;        
      }
        
        //var selectItem=false;
    var store = new Ext.data.SimpleStore(
    {
       fields:[{name:'id'},{name:'RE_Name__c'},{name:'RE_Description__c'},{name:'CreatedDate'}]}
    );
        store.loadData(myData1);
        //CREATES GRID Columns pglistcost
        
        function openrender(value, p, record){
            return String.format('<a <href="#" onClick="selectOneCheckBox(\'{0}\')" style="color:blue;text-decoration:none;">{0}</a>',value, record.data.state, record.data.ptt, 'Open');
        }  
        
        
        var grid = new Ext.grid.GridPanel({         
            store: store,colModel: new Ext.ux.grid.LockingColumnModel 
    ([
        {
            id:'Id', header:"<b>id</b>", sortable:true, dataIndex:'id',hidden:true
        },
        {
            id:'Action', header:"<b> Action </b>",width:250, sortable:true, renderer: function(value, metaData, record, rowIndex, colIndex, store){ return '<a href="#" onclick="editRecord(\''+ record.data['id']+'\')" style="color:blue;text-decoration:none;"> Edit </a>';}
        },
       
        {
            id:'RE_Name__c', header:"<b> Report Name </b>",width:300, sortable:true, dataIndex:'RE_Name__c', renderer: function(value, p, r)
                    
            //{return String.format('<a <href="#" style="color:blue;text-decoration:none;">'+ r.data['Attendee_FirstName__c'] + ' ' + r.data['Attendee_LastName__c']+'</a>')}
            {return '<a href="#" onClick="selectOneCheckBox(\''+r.data['RE_Name__c']+'\')" style=\"color:blue;text-decoration:underline;\"> '+ r.data['RE_Name__c']+'</a>';}
        },
        {
            id:'RE_Description__c', header:"<b> Report Description </b>",width:300, sortable:true,dataIndex:'RE_Description__c'
        },
        {
            id:'CreatedDate', header:"<b> Created Date </b>",width:200, sortable:true, dataIndex:'CreatedDate',renderer:Ext.util.Format.dateRenderer('m/d/Y')
        }
                ]),
            stripeRows:true,
            columnLines: false,
            view: new Ext.ux.grid.LockingGridView({ 
                      getRowClass : function (row, index) { 
                      var cls = ''; 
                      var data = row.data;
                        
                   } 
            }),
            height: 400, width: '100%',
            title:GridTitle,                           
            listeners:{
                            cellclick :function(grid,rowIndex,columnIndex,e){
                            var record = grid.getStore().getAt(rowIndex);  // Get the Record
                            var fieldName = grid.getColumnModel().getDataIndex(columnIndex); // Get field name
                            recordId2=record.get('id');
                           
                           // selectOneCheckBox(recordId2);             
                        }
                    },
                     
                    
                    bbar: new Ext.PagingToolbar({
                             pageSize: 10,
                             store: store,
                             displayInfo: true,
                             sidebar: true,
                             plugins: new Ext.ux.ProgressBarPager(),
                             align:'right'
                    }),
                    
                  sm: new Ext.grid.CheckboxSelectionModel(
                    {
                        singleSelect:true                       
                    }
                )                        
           });
            grid.render('items-grid1');
            grid.getSelectionModel().on('selectionchange', function(sm){
       
            if(sm.getSelections()!=null || sm.getSelections()!='')
            {
                strNamesmult=''; 
                strCategory='';        
                selectedCheckboxLength=0;
                
                if(sm.getSelections().length>0) 
                {
                    selectedCheckboxLength=sm.getSelections().length ;
                    
                    for(var cnt=0;cnt<=selectedCheckboxLength-1;cnt++) 
                    {
                        if(strNamesmult!=null && strNamesmult=='') 
                        {
                            strNamesmult=sm.getSelections()[cnt].get('recordId2');
                        } 
                        else if((strNamesmult!=null) && (strNamesmult!=''))
                        {
                            strNamesmult=strNamesmult+','+sm.getSelections()[cnt].get('recordId2');
                        }
                    }
                } 
           
            }
         });
         
        });   
                
        
        function selectOneCheckBox(eventname)
        {   
            hdneventName.value=eventname;
            chooseReport(eventname);  //recordId2
        }
      
        function editRecord(eventname)
        {
            hdneventName.value=eventname;
            EditReport(eventname);
        }
        /*function deleteRecord(eventname)
        {
            var confmsg = window.confirm ('Do you want to remove Attendee ?');
            if(confmsg)
            {
                hdneventName.value=eventname;
                deleteAttendeeRecord();
            }
            
        }*/
         
       </script>

       <div id="items-grid1" />
        

        <apex:inputHidden value="{!eventName}" id="eventNameValue"/>
        <apex:actionFunction action="{!chooseReport}" name="chooseReport">
        </apex:actionFunction>
        <apex:actionFunction action="{!EditReport}" name="EditReport" reRender="editrep">
        </apex:actionFunction>

        <script>
        hdneventName = document.getElementById("{!$Component.eventNameValue}");
        </script>
 
            </apex:form>     
              </apex:outputPanel>
              
              <!-- Choose Reports End -->
              
              <!-- Edit Report Start -->
              
         <apex:form >
         <apex:outputPanel id="editrep">
         <apex:outputPanel styleClass="popupBackground" layout="block" rendered="{!EditReportBool}"/>
         <apex:outputPanel styleClass="custPopup" layout="block" rendered="{!EditReportBool}">
         
              <table border="0"  cellspacing="0" cellpadding="0" width="100%" class="tabs_table" align="center" >
                <tr>
                    <td colspan="2" align="center" class="pophead"><H2 > <font size="4">Edit Report</font> </H2> </td> 
                </tr>
                
                   <tr>
                       <td align="center">
                           <table  border="0"  cellspacing="0" cellpadding="0" width="60%">
                              <tr>
                     
                 <td width="50%" height="30px" style="Padding-left:25px">
                       Report Name<font size="4" color="red">*</font></td>
                      <td> <apex:outputText value="{!editRep.RE_Name__c}"  style="width:180px"/> </td>
                  </tr>
         
                   <tr>
                      <td width="50%" height="30px" style="Padding-left:25px">
                       Report Description</td>
                      <td> <apex:inputTextArea value="{!editRep.RE_Description__c}" style="width:180px; height:50px;"/> </td> 
                  </tr>
                   
                  <tr><td align="right">
                       <apex:commandLink action="{!UpdateReport}" Value="Save" styleClass="awesome" style="color:#FFFFFF; text-decoration:none;"/> </td>
                       
                       <td align="left">
                      &nbsp;&nbsp; <apex:commandLink action="{!cancel}" Value="Cancel" styleClass="awesome"  style="color:#FFFFFF; text-decoration:none;"/>
                                   
                   </td></tr>
                           </table>
                       </td>
                   </tr>
     
         </table>
         
    </apex:outputPanel>
  </apex:outputPanel>  
    
</apex:form>    
       
          <!-- Edit Report End    
          
     <!-- Reports Code End -->  


                 <!-----------------------------Industry REport------------------------------------------->
         <apex:form id="report">    
        
         
         <apex:outputText rendered="{!IndustryReportBool}"> 
  
   
         <!-- chart industry end -->
         
               <apex:commandButton value="Back" action="{!BackAction}" rendered="{!IndustryReportBool}" styleClass="awesome"/> 
               
               
 <table width="100%" border="0">
 <tr>
 <td width="20%">


 </td>
 <td align="right">


  
 <br/><br/>
 </td>
 </tr></table>  
       
 <script>

 
    
        var hdneventName;
        
         function ModalPopupsCustom1() 
        {     
            ModalPopups.Custom('idCustom1','Update Current Status Details',    
                '<div style=\'padding: 25px;\'>' +    
                '<table>' +
                '<tr height=\'20\'><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td><font color=\'red\'>*</font>=Required</td></tr>' +
                '<tr height=\'20\'><td></td><td></td></tr>' +   
                 <apex:repeat value="{!cus12}" var="row">
                   '<tr><td><font color=\'Black\'><b>Id</b></font></td><td>'{!row.id}'</td></tr>' +
                 </apex:repeat>   
                    
                '<tr height=\'20\'><td></td><td></td></tr>' +
                '</table>' +    
                '</div>',    
                 {   
                  width: 950,   
                  buttons:'ok,cancel',    
                  okButtonText: 'Save',   
                  cancelButtonText: 'Cancel',   
                  onOk: 'ModalPopupsCustom1Save()',   
                  onCancel: 'ModalPopupsCustom1Cancel()'  
                 }   
                ); 
               
        }
         
    </script>  
    
    
 
        <link rel="Stylesheet" type="text/css"
            href="{!$Resource.extjs}/ext-3.1.1/resources/css/ext-all.css" />
        <link rel="Stylesheet" type="text/css"
            href="{!$Resource.extjs}/ext-3.1.1/examples/ux/css/LockingGridView.css" />
        <script type="text/javascript"
            src="{!$Resource.extjs}/ext-3.1.1/adapter/ext/ext-base.js"></script>
        <script type="text/javascript"
            src="{!$Resource.extjs}/ext-3.1.1/ext-all.js"></script>
        <script type="text/javascript"
            src="{!$Resource.extjs}/ext-3.1.1/examples/ux/PagingMemoryProxy.js"></script>
        <script type="text/javascript"
            src="{!$Resource.extjs}/ext-3.1.1/examples/ux/ProgressBarPager.js"></script>
        <script type="text/javascript"
            src="{!$Resource.extjs}/ext-3.1.1/examples/ux/LockingGridView.js"></script>
        <!--  <script type="text/javascript" src="{!$Resource.DateValidator}"></script> -->
        
        <!--  <script type="text/javascript" src="{!$Resource.DateValidator}"></script> -->
        <script type="text/javascript"> 
         var GridTitle= 'Industry Report';
        
        Ext.onReady(function(){
       
        var mydata;
        var selectedChkbox;
        var finalSter='';  
                
        var fm = Ext.form;
         var myData1=new Array();
        
        var myDataString1 = 'var myData = [';     
        <apex:repeat value="{!customers}" var="an"> 
        <apex:repeat value="{!an}" var="row">  
       //  alert('hiiiiiiiiiiiiiiiiiiiii'+'{!row.id}')
        
            
          var rowArray=new Array();
          rowArray[0]='{!row.id}';
         
          var fName="{!row.BVS_id__r.EA_AttendeeBarcode__r.AS_id__r.AS_FirstName__c}";
         rowArray[1]=fName.replace(/\'/g,'\'');
          var lName="{!row.BVS_id__r.EA_AttendeeBarcode__r.AS_id__r.AS_LastName__c}";
          rowArray[2]=lName.replace(/\'/g,'\'');
           rowArray[2]=lName.replace(/\"/g,'\''); 
          rowArray[3]='{!row.BVS_id__r.EA_AttendeeBarcode__r.AS_id__r.AS_CellPhone__c}';
          var eEmail="{!row.BVS_id__r.EA_AttendeeBarcode__r.AS_id__r.AS_Email__c}";
          rowArray[4]=eEmail.replace(/\'/g,'\'');
           var com="{!row.BVS_id__r.EA_AttendeeBarcode__r.AS_id__r.AS_Company__c}";
            
           rowArray[5]=com.replace(/\'/g,'\'');
          var pc ="{!row.BVS_id__r.EA_AttendeeBarcode__r.AS_id__r.AS_PrimaryBusinessCategory__c}";
          rowArray[6]=pc.replace(/\'/g,'\'');
          
          myData1.push(rowArray); 
                 
        // myDataString1 += "['{!row.id}','{!row.BVS_id__r.EA_AttendeeBarcode__r.AS_id__r.AS_FirstName__c}','{!row.BVS_id__r.EA_AttendeeBarcode__r.AS_id__r.AS_LastName__c}','{!row.BVS_id__r.EA_AttendeeBarcode__r.AS_id__r.AS_CellPhone__c}','{!row.BVS_id__r.EA_AttendeeBarcode__r.AS_id__r.AS_Email__c}','{!row.BVS_id__r.EA_AttendeeBarcode__r.AS_id__r.AS_Company__c}','{!row.BVS_id__r.EA_AttendeeBarcode__r.AS_id__r.AS_PrimaryBusinessCategory__c}'],";      
        </apex:repeat>
        </apex:repeat>            
        //myDataString1 += "['']];";      
       // myDataString1 =myDataString1.replace(",['']",'');
        
        // alert('cuestomerTeam ');
        if(myData1.length<=0){
          GridTitle=GridTitle+' - <span style=\'padding-left:200px\'><font color=\'red\'>No Records Found</font></span>';
        //  myData1='var myData = []';
          tSize=0;        
        }
      
            
               
               
          //eval(myDataString1);
       
        //var selectItem=false;
    var store = new Ext.data.SimpleStore( 
    {
           proxy: new Ext.ux.data.PagingMemoryProxy(myData1),
        fields:[{name:'id'},{name:'BVS_id__r.EA_AttendeeBarcode__r.AS_id__r.AS_FirstName__c'},{name:'BVS_id__r.EA_AttendeeBarcode__r.AS_id__r.AS_LastName__c'},{name:'BVS_id__r.EA_AttendeeBarcode__r.AS_id__r.AS_CellPhone__c'},{name:'BVS_id__r.EA_AttendeeBarcode__r.AS_id__r.AS_Email__c'},{name:'BVS_id__r.EA_AttendeeBarcode__r.AS_id__r.AS_Company__c'},{name:'BVS_id__r.EA_AttendeeBarcode__r.AS_id__r.AS_PrimaryBusinessCategory__c'}]}
    );
            store.loadData(myData1);
        //CREATES GRID Columns pglistcost
        
           function openrender(value, p, record){
            return String.format('<a <href="#" style="color:blue;text-decoration:none;">{0}</a>',value, record.data.state, record.data.ptt, 'Open');
            //return String.format('<a <href="#" onClick="selectOneCheckBox(\'{0}\')" style="color:blue;text-decoration:none;">{0}</a>',value, record.data.state, record.data.ptt, 'Open');
        }
        
        
        var grid = new Ext.grid.GridPanel({         
            store: store,colModel: new Ext.ux.grid.LockingColumnModel 
   
    ([
    
      {
            id:'id', header:"<b>id</b>",width:200, sortable:true, dataIndex:'id',hidden:true
        },
       
        
        {
            id:'BVS_id__r.EA_AttendeeBarcode__r.AS_id__r.AS_FirstName__c', header:"<b>Name</b>",width:200, sortable:true, dataIndex:'BVS_id__r.EA_AttendeeBarcode__r.AS_id__r.AS_FirstName__c', renderer: function(value, p, r)
                    {return r.data['BVS_id__r.EA_AttendeeBarcode__r.AS_id__r.AS_FirstName__c'] + '  ' + r.data['BVS_id__r.EA_AttendeeBarcode__r.AS_id__r.AS_LastName__c']}
            
        },
        {
            id:'BVS_id__r.EA_AttendeeBarcode__r.AS_id__r.AS_CellPhone__c', header:"<b>Phone</b>",width:150, sortable:true, dataIndex:'BVS_id__r.EA_AttendeeBarcode__r.AS_id__r.AS_CellPhone__c',hidden:false,renderer: openrender

        },
       
             {
            id:'BVS_id__r.EA_AttendeeBarcode__r.AS_id__r.AS_Email__c', header:"<b>E Mail</b>",width:200,height:550, sortable:true, dataIndex:'BVS_id__r.EA_AttendeeBarcode__r.AS_id__r.AS_Email__c',renderer: openrender
        },
        
           {
            id:'BVS_id__r.EA_AttendeeBarcode__r.AS_id__r.AS_Company__c', header:"<b>Company</b>",width:250,height:550, sortable:true, dataIndex:'BVS_id__r.EA_AttendeeBarcode__r.AS_id__r.AS_Company__c',renderer: openrender
        },
         
        
           {
            id:'BVS_id__r.EA_AttendeeBarcode__r.AS_id__r.AS_PrimaryBusinessCategory__c', header:"<b>Industry</b>",width:200,height:550, sortable:true, dataIndex:'BVS_id__r.EA_AttendeeBarcode__r.AS_id__r.AS_PrimaryBusinessCategory__c',renderer: openrender
        }
              
     
                ]),
            stripeRows:true,
            columnLines: true,
            
            view: new Ext.ux.grid.LockingGridView({ 
                    getRowClass : function (row, index) { 
                      var cls = ''; 
                      var data = row.data;
                        
                   } 
            }),
            height:400, width:'100%',
            title:GridTitle,
            listeners:{
                        cellclick :function(grid,rowIndex,columnIndex,e){
                            var record = grid.getStore().getAt(rowIndex);  // Get the Record
                            var fieldName = grid.getColumnModel().getDataIndex(columnIndex); // Get field name
                            recordId2=record.get('id');
                           /// selectOneCheckBox(recordId2);             
                        }
                    },
                    
                     viewConfig: { forceFit: true },
                     bbar: new Ext.PagingToolbar({
                             pageSize: 50,
                             store: store,
                             displayInfo: true,
                             sidebar: true,
                             plugins: new Ext.ux.ProgressBarPager(),
                             align:'right'
                    }),
                                       
                 sm: new Ext.grid.CheckboxSelectionModel(
                    {
                        singleSelect:true                       
                    }
                )                         
           });
            grid.render('items-grid1');
            
               grid.getSelectionModel().on('selectionchange', function(sm){
       
            if(sm.getSelections()!=null || sm.getSelections()!='')
            {
                strNamesmult=''; 
                strCategory='';        
                selectedCheckboxLength=0;
                
                if(sm.getSelections().length>0) 
                {
                    selectedCheckboxLength=sm.getSelections().length ;
                    
                    for(var cnt=0;cnt<=selectedCheckboxLength-1;cnt++) 
                    {
                        if(strNamesmult!=null && strNamesmult=='') 
                        {
                            strNamesmult=sm.getSelections()[cnt].get('recordId2');
                        } 
                        else if((strNamesmult!=null) && (strNamesmult!=''))
                        {
                            strNamesmult=strNamesmult+','+sm.getSelections()[cnt].get('recordId2');
                        }
                    }
                } 
           
            }
         });
             store.load({params:{start:0, limit:50}});
            
        });   
                
        
        function selectOneCheckBox(eventname)
        {
        
            hdneventName.value=eventname;
           // getEventDetails(eventname);  //recordId2
        }
      
    </script>
        
       
        
       
        <apex:pageBlock >   <div id="items-grid1" />
        
        
       
        
        
         </apex:pageBlock>
        
        <apex:inputHidden value="{!eventName}" id="eventNameValue"/>
      <!--  <apex:actionFunction action="{!getEventDetails}" name="getEventDetails" reRender="frm">
        </apex:actionFunction> -->
        <script>
        hdneventName = document.getElementById("{!$Component.eventNameValue}");
        </script>
                  
</apex:outputText>


      
      <!-- Geography -->
       
               <apex:outputText rendered="{!GeographyReportBool}">
               
  <apex:commandButton value="Back" action="{!BackAction}" rendered="{!GeographyReportBool}" styleClass="awesome"/>
  
  <table width="100%" border="0">
 <tr>
 <td width="20%">


 </td>
 <td align="right">

<!--<apex:commandButton value="Dashboard" action="{!Dashboardaction}"/-->
  
 <br/><br/>
 </td>
 </tr></table>  
               
      <script>
    
        var hdneventName;
        
         function ModalPopupsCustom1() 
        {     
            ModalPopups.Custom('idCustom1','Update Current Status Details',    
                '<div style=\'padding: 25px;\'>' +    
                '<table>' +
                '<tr height=\'20\'><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td><font color=\'red\'>*</font>=Required</td></tr>' +
                '<tr height=\'20\'><td></td><td></td></tr>' +   
                 <apex:repeat value="{!cus12}" var="row">
                   '<tr><td><font color=\'Black\'><b>Id</b></font></td><td>'{!row.id}'</td></tr>' +
                 </apex:repeat>   
                    
                '<tr height=\'20\'><td></td><td></td></tr>' +
                '</table>' +    
                '</div>',    
                 {   
                  width: 650,   
                  buttons:'ok,cancel',    
                  okButtonText: 'Save',   
                  cancelButtonText: 'Cancel',   
                  onOk: 'ModalPopupsCustom1Save()',   
                  onCancel: 'ModalPopupsCustom1Cancel()'  
                 }   
                ); 
               
        }
         
    </script>  
    
    
    

     <link rel="Stylesheet" type="text/css" href="{!$Resource.extjs}/ext-3.1.1/resources/css/ext-all.css" />
        <link rel="Stylesheet" type="text/css" href="{!$Resource.extjs}/ext-3.1.1/examples/ux/css/LockingGridView.css" />
        <script type="text/javascript" src="{!$Resource.extjs}/ext-3.1.1/adapter/ext/ext-base.js"></script>
        <script type="text/javascript" src="{!$Resource.extjs}/ext-3.1.1/ext-all.js"></script>
        <script type="text/javascript" src="{!$Resource.extjs}/ext-3.1.1/examples/ux/RowEditor.js"></script>
          <script type="text/javascript" src="{!$Resource.extjs}/ext-3.1.1/examples/ux/PagingMemoryProxy.js"></script>
        <script type="text/javascript" src="{!$Resource.extjs}/ext-3.1.1/examples/ux/ProgressBarPager.js"></script>
        <script type="text/javascript" src="{!$Resource.extjs}/ext-3.1.1/examples/ux/LockingGridView.js"></script>
         <script type="text/javascript" src="{!$Resource.extjs}/ext-3.1.1/examples/ux/PanelResizer.js"></script>
        <script type="text/javascript" src="{!$Resource.extjs}/ext-3.1.1/examples/ux/progress-bar-pager.js"></script>
       
       
       
        <!--  <script type="text/javascript" src="{!$Resource.DateValidator}"></script> -->
        
        
        
        
        
        <script type="text/javascript"> 
        var GridTitle= 'Geography Report';
        Ext.onReady(function(){
        var mydata;
        var selectedChkbox;
        var finalSter='';  
        var recordId2;            
        var fm = Ext.form;
         var myData2=new Array();
        
       // var myDataString1 = 'var myData = [ ';     
        <apex:repeat value="{!geographycus}" var="gn">
        <apex:repeat value="{!gn}" var="row">  
        
            var rowArray=new Array();
            rowArray[0]='{!row.id}';
         
            var tName="{!row.BVS_id__r.EA_AttendeeBarcode__r.AS_id__r.AS_FirstName__c}";
            rowArray[1]=tName.replace(/\'/g,'\'');
            var qName="{!row.BVS_id__r.EA_AttendeeBarcode__r.AS_id__r.AS_LastName__c}";
            rowArray[2]=qName.replace(/\'/g,'\'');
            rowArray[2]=qName.replace(/\"/g,'\''); 
            rowArray[3]='{!row.BVS_id__r.EA_AttendeeBarcode__r.AS_id__r.AS_CellPhone__c}';
            var mEmail="{!row.BVS_id__r.EA_AttendeeBarcode__r.AS_id__r.AS_Email__c}";
            rowArray[4]=mEmail.replace(/\'/g,'\'');
            var comp="{!row.BVS_id__r.EA_AttendeeBarcode__r.AS_id__r.AS_Company__c}";
           
            rowArray[5]=comp.replace(/\'/g,'\'');
            rowArray[6] ='{!row.BVS_id__r.EA_AttendeeBarcode__r.AS_id__r.AS_WorkState__c}';
           
          
           myData2.push(rowArray); 
        
        
        
        
        
               
        // myDataString1 += "['{!row.id}','{!row.BVS_id__r.EA_AttendeeBarcode__r.AS_id__r.AS_FirstName__c}','{!row.BVS_id__r.EA_AttendeeBarcode__r.AS_id__r.AS_LastName__c}','{!row.BVS_id__r.EA_AttendeeBarcode__r.AS_id__r.AS_CellPhone__c}','{!row.BVS_id__r.EA_AttendeeBarcode__r.AS_id__r.AS_Email__c}','{!row.BVS_id__r.EA_AttendeeBarcode__r.AS_id__r.AS_Company__c}','{!row.BVS_id__r.EA_AttendeeBarcode__r.AS_id__r.AS_WorkState__c}'],";      
        </apex:repeat>      
        </apex:repeat>      
       // myDataString1 += "['']];";      
       // myDataString1 =myDataString1.replace(",['']",'');
        
        // alert('cuestomerTeam ');
        if(myData2.length<=0){
          GridTitle=GridTitle+' - <span style=\'padding-left:200px\'><font color=\'red\'>No Records Found</font></span>';
        //  myData2='var myData = []';
          tSize=0;        
       }
      
            
               
               
         
        //eval(myDataString1);
        //var selectItem=false;
    var store = new Ext.data.SimpleStore( 
    {
         proxy: new Ext.ux.data.PagingMemoryProxy(myData2),
        fields:[{name:'id'},{name:'BVS_id__r.EA_AttendeeBarcode__r.AS_id__r.AS_FirstName__c'},{name:'BVS_id__r.EA_AttendeeBarcode__r.AS_id__r.AS_LastName__c'},{name:'BVS_id__r.EA_AttendeeBarcode__r.AS_id__r.AS_CellPhone__c'},{name:'BVS_id__r.EA_AttendeeBarcode__r.AS_id__r.AS_Email__c'},{name:'BVS_id__r.EA_AttendeeBarcode__r.AS_id__r.AS_Company__c'},{name:'BVS_id__r.EA_AttendeeBarcode__r.AS_id__r.AS_WorkState__c'}]}
    );
            store.loadData(myData2);
        //CREATES GRID Columns pglistcost
        
        function openrender(value, p, record){
            return String.format('<a <href="#" style="color:blue;text-decoration:none;">{0}</a>',value, record.data.state, record.data.ptt, 'Open');
            //return String.format('<a <href="#" onClick="selectOneCheckBox(\'{0}\')" style="color:blue;text-decoration:none;">{0}</a>',value, record.data.state, record.data.ptt, 'Open');
        }
        
        
        var grid = new Ext.grid.GridPanel({         
            store: store,colModel: new Ext.ux.grid.LockingColumnModel 
    ([
    
      {
            id:'id', header:"<b>id</b>",width:200, sortable:true, dataIndex:'id',hidden:true
        },
      
        
        {
            id:'BVS_id__r.EA_AttendeeBarcode__r.AS_id__r.AS_FirstName__c', header:"<b>Name</b>",width:230, sortable:true, dataIndex:'BVS_id__r.EA_AttendeeBarcode__r.AS_id__r.AS_FirstName__c', renderer: function(value, p, r)
                    {return r.data['BVS_id__r.EA_AttendeeBarcode__r.AS_id__r.AS_FirstName__c'] + '  ' + r.data['BVS_id__r.EA_AttendeeBarcode__r.AS_id__r.AS_LastName__c']}
            
        },
        {
            id:'BVS_id__r.EA_AttendeeBarcode__r.AS_id__r.AS_CellPhone__c', header:"<b>Phone</b>",width:150, sortable:true, dataIndex:'BVS_id__r.EA_AttendeeBarcode__r.AS_id__r.AS_CellPhone__c',hidden:false,renderer: openrender

        },
       
             {
            id:'BVS_id__r.EA_AttendeeBarcode__r.AS_id__r.AS_Email__c', header:"<b>E Mail</b>",width:200,height:550, sortable:true, dataIndex:'BVS_id__r.EA_AttendeeBarcode__r.AS_id__r.AS_Email__c',renderer: openrender
        },
        
           {
            id:'BVS_id__r.EA_AttendeeBarcode__r.AS_id__r.AS_Company__c', header:"<b>Company</b>",width:220,height:550, sortable:true, dataIndex:'BVS_id__r.EA_AttendeeBarcode__r.AS_id__r.AS_Company__c',renderer: openrender
        },
        
        
        
           {
            id:'BVS_id__r.EA_AttendeeBarcode__r.AS_id__r.AS_WorkState__c', header:"<b>State</b>",width:200,height:550, sortable:true, dataIndex:'BVS_id__r.EA_AttendeeBarcode__r.AS_id__r.AS_WorkState__c',renderer: openrender
        }
                
          
     
        
     
                ]),
            stripeRows:true,
            columnLines: true,
            view: new Ext.ux.grid.LockingGridView({ 
                    getRowClass : function (row, index) { 
                      var cls = ''; 
                      var data = row.data;
                        
                   } 
            }),
            height: 460, width:'100%',
            title:GridTitle,
            listeners:{
                        cellclick :function(grid,rowIndex,columnIndex,e){
                            var record = grid.getStore().getAt(rowIndex);  // Get the Record
                            var fieldName = grid.getColumnModel().getDataIndex(columnIndex); // Get field name
                            recordId2=record.get('id');
                           /// selectOneCheckBox(recordId2);             
                        }
                    },
                    
                     viewConfig: { forceFit: true },
                    bbar: new Ext.PagingToolbar({
                             pageSize: 50,
                             store: store,
                             displayInfo: true,
                             sidebar: true,
                             plugins: new Ext.ux.ProgressBarPager(),
                             align:'right'
                    }),
                                       
                 sm: new Ext.grid.CheckboxSelectionModel(
                    {
                        singleSelect:true                       
                    }
                )                         
           });
            grid.render('items-grid1');
            
               grid.getSelectionModel().on('selectionchange', function(sm){
       
            if(sm.getSelections()!=null || sm.getSelections()!='')
            {
                strNamesmult=''; 
                strCategory='';        
                selectedCheckboxLength=0;
                
                if(sm.getSelections().length>0) 
                {
                    selectedCheckboxLength=sm.getSelections().length ;
                    
                    for(var cnt=0;cnt<=selectedCheckboxLength-1;cnt++) 
                    {
                        if(strNamesmult!=null && strNamesmult=='') 
                        {
                            strNamesmult=sm.getSelections()[cnt].get('recordId2');
                        } 
                        else if((strNamesmult!=null) && (strNamesmult!=''))
                        {
                            strNamesmult=strNamesmult+','+sm.getSelections()[cnt].get('recordId2');
                        }
                    }
                } 
           
            }
         });
             store.load({params:{start:0, limit:50}});
            
        });   
                
        
        function selectOneCheckBox(eventname)
        {
        
            hdneventName.value=eventname;
           // getEventDetails(eventname);  //recordId2
        }
      
    </script>
        
        
       
        <apex:pageBlock >   <div id="items-grid1" /> </apex:pageBlock>
        
        <apex:inputHidden value="{!eventName}" id="eventNameValue2"/>
    
        <script>
        hdneventName = document.getElementById("{!$Component.eventNameValue2}");
        </script>
 </apex:outputText>   
 </apex:form>   










     
        </div>
            <!--  end content-table  -->
            
            
        
            <!--  start actions-box ............................................... -->
            <!-- end actions-box........... -->
            
            
            <div class="clear"></div>
         
        </div>
        <!--  end content-table-inner ............................................END  -->
        </td>
        <td id="tbl-border-right"></td>
    </tr>
    <tr>
        <th class="sized bottomleft"></th>
        <td id="tbl-border-bottom">&nbsp;</td>
        <th class="sized bottomright"></th>
    </tr>
    </table>
    <div class="clear">&nbsp;</div>

</div>
 
<!--  end content -->
<div class="clear">&nbsp;</div>
</div>
<!--  end content-outer........................................................END -->

<div class="clear">&nbsp;</div>
    
<!-- start footer -->         
<div id="footer">
    <!--  start footer-left -->
    <div id="footer-left">&copy; Copyright Globalnest Ltd. <span id="spanYear"></span> 
    <a href="">www.globalnest.com</a>. All rights reserved.</div>
    <!--  end footer-left -->
    <div class="clear">&nbsp;</div>
</div>
<!-- end footer -->






  
  
  
  
  
</apex:page>